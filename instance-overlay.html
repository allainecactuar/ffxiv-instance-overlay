<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<title></title>
<style>

body, html {
    margin: 0;
}

html {
    background-position: top left;
    background-repeat: no-repeat;
    box-sizing: border-box;
    height: 100%;
    background-color: transparent;
overflow: hidden;
/*border: 1px solid white;*/
}

body {
background-color: transparent;
margin: 15px 0;
}

span {
  font: bold 20px "Segoe UI";
  line-height: 0;
  color: #4e1708;
  border-radius:50%;
  background-color: #cfc7b2;
  padding: 1px 9px 4px 9px;
  text-align: center;
}

</style>
<script>

  // Zone Change
  // Opcode 1
  // Payload [ zoneID, zoneName, UUID ]

  // Instance message
  // Opcode 0
  // Payload[0] "0039"
  // Payload[2] "You are now in the instanced area Area Name InstanceSymbol."


  function onLogLine(event) {

  if ( event.detail.opcode === 1 ) {
  // Zone change
  document.getElementById("content").innerHTML = "";
  return;
  }

  if ( event.detail.opcode !== 0 ) {
  return;
  }

  if ( event.detail.payload[0] !== "0039" ) {
  return;
  }

  var match = event.detail.payload[2].match( "You are now in the instanced area (.*?)(.)[.]" );
  if ( null === match ) {
  return;
  }

  const instanceCharCode = match[2].charCodeAt(0)
  const instanceNumber = instanceCharCode - 57520;

  document.getElementById("content").innerHTML = "<span>" + instanceNumber + "</span>"
}

document.addEventListener("onLogLine", onLogLine);

</script>
</head>
<body>
  <div id="content">
    <span>
      0
    </span>
  </div>
</body>
</html>
